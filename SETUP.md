# ğŸš€ Dating Bot Platform - Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ

## Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ VPS Ğ½Ğ° Beget
- ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼: 4 vCPU, 8GB RAM, 80GB SSD
- ĞĞ¡: Ubuntu 22.04/24.04
- Ğ¢Ğ°ĞºĞ¶Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ: PostgreSQL Ğ¸ S3

### 2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° (Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹)

```bash
curl -sSL https://raw.githubusercontent.com/Rivega42/dating-bot/main/scripts/install.sh | sudo bash -s -- Rivega42/dating-bot
```

### 3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ .env

```bash
nano /home/datingbot/dating-bot/.env
```

Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ñ‚ Beget:
- `BEGET_DB_HOST` - Ñ…Ğ¾ÑÑ‚ PostgreSQL
- `BEGET_DB_PASSWORD` - Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
- `BEGET_S3_ACCESS_KEY` / `BEGET_S3_SECRET_KEY`

### 4. Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ‘Ğ”

```bash
cd /home/datingbot/dating-bot
psql "$DATABASE_URL" -f postgres/init.sql
```

### 5. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ

```bash
make restart
make health
```

---

## GitHub Secrets Ğ´Ğ»Ñ CI/CD

Settings â†’ Secrets â†’ Actions:

| Secret | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|
| `SERVER_HOST` | IP ÑĞµÑ€Ğ²ĞµÑ€Ğ° |
| `SERVER_USER` | `datingbot` |
| `SERVER_SSH_KEY` | ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ SSH ĞºĞ»ÑÑ‡ |
| `TELEGRAM_BOT_TOKEN` | Ğ¢Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ° Ğ´Ğ»Ñ Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ² |
| `TELEGRAM_CHAT_ID` | ID Ñ‡Ğ°Ñ‚Ğ° |

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VPS Beget                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Nginx  â”‚â†’ â”‚   API   â”‚â†’ â”‚   Redis   â”‚â† â”‚   Worker    â”‚  â”‚
â”‚  â”‚  :80    â”‚  â”‚  :8000  â”‚  â”‚   :6379   â”‚  â”‚ (Playwright)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†“                          â†‘                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚Schedulerâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Task Queue â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Monitoring: Prometheus :9090 â”‚ Grafana :3000 â”‚ Alerts TG   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“                            â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PostgreSQL   â”‚           â”‚   S3 Storage   â”‚
   â”‚ (Beget)      â”‚           â”‚   (Beget)      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
make start      # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
make stop       # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ
make restart    # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
make logs       # Ğ›Ğ¾Ğ³Ğ¸
make health     # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
make backup     # Ğ‘ÑĞºĞ°Ğ¿
```

---

## ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ worker-Ğ½Ğ¾Ğ´Ñƒ:

```bash
./scripts/add-worker.sh 192.168.1.100 worker-2
```

### ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸:
- Grafana: http://SERVER_IP:3000
- Prometheus: http://SERVER_IP:9090

---

## API Endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | URL | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|-----|----------|
| POST | `/auth/register` | Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ |
| POST | `/auth/login` | ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| GET | `/auth/me` | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ |
| POST | `/vk-accounts` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ VK Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ |
| GET | `/vk-accounts` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ² |
| POST | `/vk-accounts/{id}/start` | Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ° |
| POST | `/vk-accounts/{id}/stop` | ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ |
| GET | `/stats` | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° |
| GET | `/health` | Health check |

Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ API: http://SERVER_IP:8000/docs
